<div class="flex h-screen overflow-hidden bg-gray-50 ">
  <button (click)="toggleSidenav()"
    class="fixed top-0 left-0 z-50 text-gray-600 hover:text-gray-900 lg:hidden cursor-pointer">
    <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
      stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
    </svg>
  </button>

  <div class="flex-shrink-0">
    <app-sidenav [isExpanded]="isSidenavExpanded" [activeItemId]="sideNav.activeItemId" [userName]="sideNav.userName"
      (toggleClicked)="toggleSidenav()" [userRole]="sideNav.userRole" (navItemClicked)="navItemClicked($event)"
      (logoutClicked)="logoutClicked($event)">
    </app-sidenav>
  </div>

  <main class="flex-1 min-w-0">


    <div class="p-6 lg:p-8 flex flex-col lg:flex-row gap-6 lg:gap-8 h-full overflow-y-auto lg:overflow-y-hidden">


      <div
        class="w-full lg:w-[33%] flex-shrink-0 bg-white rounded-[20px] shadow-[0_4px_12px_rgba(0,0,0,0.10)] flex flex-col lg:h-full lg:overflow-y-auto p-4 no-scrollbar">
        <app-note [title]="textOne.title" [subtitle]="textOne.subtitle"></app-note>

        <app-note [title]="textTwo.title" [subtitle]="textTwo.subtitle"></app-note>
        <hr class="my-6 border-gray-200">

        <div class="mb-4">

          <h3 class="text-lg sm:text-xl font-bold">
            Lorem ipsum dolor sit
          </h3>
        </div>

        <app-list [items]="defaultItems"></app-list>

        <hr class="my-6 border-gray-200">
        <app-remediation-card [title]="redOne.title" [header]="redOne.header" [defaultText]="redOne.defaultText"
          [expandableText]="redOne.expandableText"></app-remediation-card>

        <app-remediation-card [title]="redTwo.title" [header]="redTwo.header" [defaultText]="redTwo.defaultText"
          [expandableText]="redTwo.expandableText"></app-remediation-card>

      </div>


      <!-- This is the main white card that contains everything -->
      <div class="w-full p-5  lg:w-[100%] bg-white rounded-[15px] flex flex-col  lg:overflow-y-auto">
        <app-note [title]="'Lorem Lorem Lorem'" [subtitle]="''"></app-note>


        <div class="bg-[#FAFAFA] overflow-x-auto lg:overflow-visible  p-6 rounded-[15px] relative on-scrollbar ">


          <div class="absolute top-4 right-4 z-10 hidden lg:flex items-center space-x-2">
            <button (click)="zoomOut()"
              class="bg-white w-8 h-8 rounded-full flex items-center justify-center shadow hover:bg-gray-100 transition-colors">
              <svg class="w-5 h-5 text-gray-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                stroke-width="2" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M18 12H6" />
              </svg>
            </button>
            <button (click)="zoomIn()"
              class="bg-white w-8 h-8 rounded-full flex items-center justify-center shadow hover:bg-gray-100 transition-colors">
              <svg class="w-5 h-5 text-gray-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                stroke-width="2" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m6-6H6" />
              </svg>
            </button>
            <button (click)="resetZoom()"
              class="bg-white w-8 h-8 rounded-full flex items-center justify-center shadow hover:bg-gray-100 transition-colors">
              <svg class="w-5 h-5 text-gray-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.667 0l3.181-3.183m-4.991-2.695v-4.992m0 0h-4.992m4.992 0l-3.181-3.183a8.25 8.25 0 00-11.667 0L2.985 7.348z" />
              </svg>
            </button>
          </div>
          <div class="flex items-center" [style.transform]="'scale(' + zoomLevel + ')'">

            <div class="flex flex-col items-center text-center flex-shrink-0">
              <app-image-hover [imageUrl]="A.imageUrl" [position]="A.position" [title]="A.title"
                [hoverComponent]="A.hoverComponent" [subtitle]="A.subtitle">
              </app-image-hover>
            </div>


            <img src="arrow.svg" alt="Connector Arrow" class="w-24 mx-4 flex-shrink-0" />

            <!-- Node 2 & 3: Intermediate Nodes -->
            <div class="flex items-center" *ngFor="let AB of BC; let i = index">
              <div class="flex flex-col items-center text-center flex-shrink-0">
                <app-image-hover [imageUrl]="AB.imageUrl" [position]="AB.position" [title]="AB.title"
                  [hoverComponent]="AB.hoverComponent" [subtitle]="AB.subtitle">
                </app-image-hover>

              </div>
              <img *ngIf="i < 1" src="arrow.svg" alt="Connector Arrow" class="w-24 mx-4 flex-shrink-0" />
            </div>

            <!-- Connector 3: Forking Line (Custom SVG) -->
            <div class="w-48 h-24 flex-shrink-0 mx-4">
              <img src="forking-connector.svg" alt="Forking Connector" class="w-full h-full object-contain">
            </div>

            <!-- End Nodes Container -->
            <div class="flex flex-col space-y-8">
              <!-- Node 4: End Node 1 -->
              <div class="flex items-center space-x-3">
                <div class="relative flex-shrink-0">
                  <app-image-hover [imageUrl]="CD.imageUrl" [position]="CD.position" [title]="CD.title"
                    [hoverComponent]="CD.hoverComponent" [subtitle]="CD.subtitle">
                  </app-image-hover>
                </div>
              </div>
              <!-- Node 5: End Node 2 -->
              <div class="flex items-center space-x-3">
                <div class="relative flex-shrink-0">
                  <app-image-hover [imageUrl]="EF.imageUrl" [position]="EF.position" [title]="EF.title"
                    [hoverComponent]="EF.hoverComponent" [subtitle]="EF.subtitle">
                  </app-image-hover>
                </div>
              </div>
            </div>

          </div>

          <!-- Divider -->
          <hr class="my-6 border-gray-200">

          <!-- Bottom Section: Status Indicators -->
          <div class="flex items-center space-x-6">
            <app-status status="error" title="Lorem"></app-status>
            <app-status status="warning" title="Lorem"></app-status>
            <app-status status="success" title="Lorem"></app-status>
          </div>

        </div>

        <app-note [title]="'Lorem ipsum dolor sit'" [subtitle]="''"></app-note>
        <div class="flex gap-4 flex-col lg:flex-row">

          <!-- KEY CHANGE: Added 'flex-1' to make this item grow -->
          <div class="flex-1">
            <app-context-risk-card [assetItems]="GH.assetItems" [currentPageStart]="GH.currentPageStart"
              [currentPageEnd]="GH.currentPageEnd" [totalItems]="GH.totalItems">
            </app-context-risk-card>
          </div>

          <!-- KEY CHANGE: Added 'flex-1' to make this item grow -->
          <div class="flex-1">
            <app-context-analytic-card [criticalCount]="IJ.criticalCount" [highCount]="IJ.highCount"
              [mediumCount]="IJ.mediumCount" [lowCount]="IJ.lowCount">
            </app-context-analytic-card>
          </div>

        </div>
      </div>

    </div>
  </main>

</div>